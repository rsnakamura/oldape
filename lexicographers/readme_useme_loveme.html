<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Fetched Files &mdash; APETools 2014.09.18 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2014.09.18',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="APETools 2014.09.18 documentation" href="../index.html" />
    <link rel="up" title="Lexicographers" href="index.html" />
    <link rel="next" title="Time Converter" href="timeconverter.html" />
    <link rel="prev" title="apetools.lexicographers.parametertree.ParameterTree._traverse" href="api/apetools.lexicographers.parametertree.ParameterTree._traverse.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          APETools</a>
        <span class="navbar-text navbar-version pull-left"><b>2014.09.18</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation/user/index.html">User Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/developer/index.html">Developer Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../baseclass.html">The BaseClass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log_setter.html">The Log Setter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main.html">The Main Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">APE Readme</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../affectors/index.html">Affectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builders/index.html">Builders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/index.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commons/index.html">Commons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connections/index.html">Connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devices/index.html">Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../informants/index.html">Informants</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Lexicographers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/index.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameters/index.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parsers/index.html">Parsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pipes/index.html">Pipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proletarians/index.html">Proletarians</a></li>
<li class="toctree-l1"><a class="reference internal" href="../threads/index.html">Threads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchers/index.html">Watchers</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">The Fetched Files</a><ul>
<li><a class="reference internal" href="#source-this-for-sl4a">source_this_for_sl4a</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="api/apetools.lexicographers.parametertree.ParameterTree._traverse.html" title="Previous Chapter: apetools.lexicographers.parametertree.ParameterTree._traverse"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; apetools.lexicog...</span>
    </a>
  </li>
  <li>
    <a href="timeconverter.html" title="Next Chapter: Time Converter"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Time Converter &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/lexicographers/readme_useme_loveme.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="the-fetched-files">
<h1>The Fetched Files<a class="headerlink" href="#the-fetched-files" title="Permalink to this headline">¶</a></h1>
<p>The two files that were fetched were the <cite>ttr.ini</cite> file and the <cite>source_this_for_sl4a</cite> files.</p>
<div class="section" id="source-this-for-sl4a">
<h2>source_this_for_sl4a<a class="headerlink" href="#source-this-for-sl4a" title="Permalink to this headline">¶</a></h2>
<p>This is a fairly crude file to enable SL4a and forward the ports. It assumes that there is no server currently running and grabs the first port that shows up in the output. To use it:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Make sure there isn&#8217;t a currently running SL4a server on the DUT</li>
<li>Enable the ADB Server if it isn&#8217;t already running</li>
<li>source this file:
<cite>source source_this_for_sl4a</cite></li>
</ol>
</div></blockquote>
<p>For those not familiar with the <cite>source</cite> command, Unix doesn&#8217;t allow a running program to change the state of its parents variables, so if you want to change an environment variable (in this case <cite>AP_PORT</cite>, which android.py uses to find the SL4a server), you need to use the <cite>source</cite> command to get around this.</p>
<p>The <cite>source_this_for_sl4a</cite> file:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># This will find the sl4a server port and forward it.</span>
<span class="c"># Due to permission restrictions, you can&#39;t run this as a script.</span>
<span class="c"># instead use source:</span>
<span class="c"># bash_prompt&gt; source source_this_for_sl4a</span>
<span class="c"># Warning: this is a work in progress. In particular, netstat doesn&#39;t have a way to idendtify what the meaning of the ports are</span>
<span class="c"># So the port-forwarding might not work. On recently started machines, it usually works.</span>

<span class="c">#echo  &quot;the Happy Path : kill all the servers in the SL4A GUI then source this.&quot;</span>

<span class="nv">PREFIX</span><span class="o">=</span><span class="s2">&quot;::ffff:127\.0\.0\.1:&quot;</span>
<span class="nv">PORT</span><span class="o">=</span><span class="s2">&quot;[0-9]\{5\}&quot;</span>
<span class="nv">SUFFIX</span><span class="o">=</span><span class="s2">&quot; :::\\*&quot;</span>
<span class="nv">LOCAL_ADDRESS</span><span class="o">=</span><span class="nv">$PREFIX$PORT</span>


<span class="c"># check if the server has been started</span>
<span class="nv">SL4A</span><span class="o">=</span><span class="sb">`</span>adb shell netstat | grep -o <span class="nv">$LOCAL_ADDRESS</span> | grep -o <span class="nv">$PORT</span><span class="sb">`</span>

<span class="c">#start the server</span>
<span class="k">if</span> <span class="o">[</span> -z <span class="nv">$SL4A</span> <span class="o">]</span>
    <span class="k">then</span>
<span class="k">        </span>adb shell am start -a com.googlecode.android_scripting.action.LAUNCH_SERVER -n com.googlecode.android_scripting/.activity.ScriptingLayerServiceLauncher
        <span class="nb">echo</span> <span class="s2">&quot;Sleeping for a second to let the server start.&quot;</span>
        sleep 1
<span class="k">fi</span>

<span class="nv">SL4A</span><span class="o">=</span><span class="sb">`</span>adb shell netstat | grep -o <span class="nv">$LOCAL_ADDRESS</span> | grep -o <span class="nv">$PORT</span><span class="sb">`</span>

<span class="nb">echo</span> <span class="s2">&quot;Forwarding to port: &quot;</span><span class="nv">$SL4A</span>

<span class="nb">echo</span> <span class="nv">$SL4A</span>
adb forward tcp:9999 tcp:<span class="nv">$SL4A</span>

<span class="nb">export </span><span class="nv">AP_PORT</span><span class="o">=</span>9999
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, russelln.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>